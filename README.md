# work mode — Расширение для VS Code

Режим работы для **Visual Studio Code** с **секундомером**, **автоматическими бэкапами** (включая **несохранённые правки**) и **журналом сессий**, без **визуального шума**.

> **Автор:** Курташев Кирилл Ярославович, группа M3115
>
> **Репозиторий:** [ссылка на GitHub](https://github.com/yf-keyt/work-mode)

---

## Возможности

- **Минималистичный интерфейс**  
  Скрывает боковую и нижнюю панели, Activity Bar, но оставляет статус-бар видимым.  
  Помогает сосредоточиться на коде без визуального шума.

- **Секундомер в статус-баре**  
  Отсчитывает время сессии, можно ставить на паузу/возобновлять.

- **Инкрементные бэкапы (каждую минуту)**  
  - Сохраняются **все файлы, измененные за определенный временной промежуток** (по умолчанию - минута), включая несохранённые.  
  - **Безопасное восстановление:** бэкап берётся напрямую из открытых вкладок, даже если редактор не сохранял файл на диск.

- **История**  
  - `sessions.jsonl` — история запусков/остановок Work Mode и длительность.  
  - `backups.jsonl` — история бэкапов с количеством файлов и временем создания.

---

## Команды

| Команда | Описание |
|----------|-----------|
| `Work Mode: Start (Stopwatch)` | Запуск режима и секундомера |
| `Work Mode: Stop` | Остановка и выход из режима |
| `Work Mode: Toggle` | Переключение (вкл/выкл) |
| `Work Mode: Pause/Resume Stopwatch` | Пауза или продолжение таймера |
| `Work Mode: Show Sessions Log` | Открыть журнал сессий |
| `Work Mode: Open Backups Folder` | Открыть папку с бэкапами |

---

## Горячие клавиши

| Комбинация | Действие |
|-------------|-----------|
| `Ctrl + Alt + M` / `⌘ + Alt + M` | Переключить режим Work Mode |
| `Ctrl + Alt + P` / `⌘ + Alt + P` | Пауза / продолжить секундомер |

---

## Структура служебных данных

После запуска плагина в проекте создаётся структура:

```
.vscode-work-mode/
├─ backups/           # ZIP-архивы с изменёнными файлами
└─ logs/
   ├─ sessions.jsonl  # журнал сессий
   └─ backups.jsonl   # журнал созданных бэкапов
```

---

## Настройки

Все параметры доступны в `settings.json`:

```json
{
  "work-mode.enableMinimalUI": true,
  "work-mode.backup.enabled": true,
  "work-mode.backup.intervalSec": 60,
  "work-mode.backup.maxItems": 300,
  "work-mode.backup.excludes": [
    "**/node_modules/**",
    "**/.git/**",
    "**/dist/**",
    "**/.vscode-work-mode/**"
  ],
  "work-mode.backup.saveAllBefore": true
}
```

**Пояснения:**
- `enableMinimalUI` — включает минималистичный режим при старте Work Mode  
- `backup.intervalSec` — интервал между созданием бэкапов (в секундах)  
- `backup.maxItems` — максимальное количество архивов (старые удаляются)  
- `backup.excludes` — шаблоны исключений  
- `backup.saveAllBefore` — при создании бэкапа вызывает `Save All`  

---

## Как установить

1. Склонировать репозиторий или скачать `.zip`:
   ```bash
   git clone git@github.com:your-username/work-mode.git
   ```
2. Открыть проект в VS Code  
3. Нажать `F5` — откроется новое окно с запущенным плагином  
4. Активировать командой **“Work Mode: Start (Stopwatch)”**

---

## Технические детали

- Написан на **Node.js + VS Code API**
- Хранит данные локально в `.vscode-work-mode/`
- Бэкапы создаются автоматически при изменении файлов
- Совместим с macOS, Windows, Linux

